{% extends 'base.html' %}
{% block title %}Association Reports{% endblock %}
{% block content %}
<div class="container mt-4">
  <h2>ðŸ“Š Association Reports</h2>
  <p>Total Volunteers: <strong>{{ volunteers_count }}</strong></p>
<form method="get" class="mb-4 d-flex align-items-center gap-2">
  <label for="status" class="form-label fw-bold mb-0">Filter by status:</label>
  <select name="status" id="status" class="form-select w-auto">
    <option value="">All</option>
    <option value="pending" {% if status_filter == "pending" %}selected{% endif %}>Pending</option>
    <option value="accepted" {% if status_filter == "accepted" %}selected{% endif %}>Accepted</option>
    <option value="rejected" {% if status_filter == "rejected" %}selected{% endif %}>Rejected</option>
  </select>
 <button type="submit" class="btn btn-success">Apply</button>
  </form>


  <table class="table table-bordered mt-3">
    <thead>
      <tr>
        <th>Meal</th>
        <th>Volunteer</th>
        <th>Status</th>
        <th>Comment</th>
      </tr>
    </thead>
    <tbody>
      {% for meal in meals %}
      <tr>
        <td>{{ meal.title }}</td>
        <td>{{ meal.owner.username }}</td>
        <td>
          {% if meal.status == 'accepted' %}
            <span class="badge bg-success">Accepted</span>
          {% elif meal.status == 'rejected' %}
            <span class="badge bg-danger">Rejected</span>
          {% else %}
            <span class="badge bg-warning text-dark">Pending</span>
          {% endif %}
        </td>
        <td>{{ meal.comment_from_association }}</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% endblock %}
